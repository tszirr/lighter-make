project(LIGHTER)

#--------------------------------------------------------------------
# Source dependencies
#--------------------------------------------------------------------
set(LIGHTER_DATA_STAMP ${PROJECT_BINARY_DIR}/${CMAKE_CFG_INTDIR}/lighter_data.stamp)
add_custom_command(OUTPUT ${LIGHTER_DATA_STAMP}
    COMMAND ${CMAKE_COMMAND} -E touch \"${LIGHTER_DATA_STAMP}\"
    DEPENDS ${LIGHTER_DATA_FILES})

if(LIGHTER_IMPORT_SRC)
  set(LIGHTER_DATA_STAMP ${LIGHTER_DATA_STAMP} PARENT_SCOPE)
endif()

#--------------------------------------------------------------------
# Create target
#--------------------------------------------------------------------
source_group("Source Files" FILES ${LIGHTER_SRC})
add_library(lighter CMakeSrc.txt ${LIGHTER_SRC} ${LIGHTER_DATA_STAMP})
add_lighter_dependencies(lighter)

#--------------------------------------------------------------------
# Data files
#--------------------------------------------------------------------
function(copy_lighter_data_files DEST_TARGET TARGET_DATA_DIR)
    copy_data_files(${DEST_TARGET} "${TARGET_DATA_DIR}" "${LIGHTER_SOURCE_DIR}" ${LIGHTER_DATA_FILES})
endfunction()

#--------------------------------------------------------------------
# Install files?
#--------------------------------------------------------------------
if (LIGHTER_INSTALL_DATA_DIRECTORY)
	install (FILES ${LIGHTER_DATA_FILES} DESTINATION ${LIGHTER_INSTALL_DATA_DIRECTORY})
endif()
if (LIGHTER_LIB_INSTALL)
    install (TARGETS lighter DESTINATION lib)
endif()
